npm run api:deploy -FunctionName "mbapp-nonprod-objects" -Region "us-east-1" -ApiBase "$Env:MBAPP_API_BASE"
# env + token
 $env:MBAPP_BEARER = $(node ops/smoke.mjs login:dev --tenant DemoTenant --email dev@example.com --policy full --export)

# per-module CRUD
node ops/smoke.mjs smoke:vendors:create --each 2 --code seed
node ops/smoke.mjs smoke:vendors:list
node ops/smoke.mjs smoke:vendors:update --limit 3 --code updated
node ops/smoke.mjs smoke:vendors:delete   # ← deleteAll()

# flows
node ops/smoke.mjs smoke:purchaseOrder:flow --lines 2 --qty 3 --code po
node ops/smoke.mjs smoke:salesOrder:flow    --lines 3 --qty 2 --code so

# scanner + guardrails
node ops/smoke.mjs smoke:scanner:basic --count 3
node ops/smoke.mjs smoke:guardrails:so-overcommit --qty 2
node ops/smoke.mjs smoke:guardrails:so-overfulfill --qty 2
node ops/smoke.mjs smoke:guardrails:cancel-release

# Reservation flow (creates tagged client + resource + reservation)
node ops/smoke.mjs smoke:reservation:flow --code resv --durationMin 60

# Product↔inventory linkage report
node ops/smoke.mjs smoke:reports:product-links --limit 500




node ops/smoke.mjs smoke:seed:all --each 10 --code seed$(Get-Date -Format 'HHmmss')

# inventory:25, products:12, clients:6; others default to 5
node ops/smoke.mjs smoke:seed:all --each 5 --each-per inventory:25,products:12,clients:6 --code bulk

node ops/smoke.mjs smoke:seed:all --modules inventory,products,clients --each 8 --code small

node ops/smoke.mjs smoke:delete:all --yes

# or limit which modules:
node ops/smoke.mjs smoke:delete:all --modules products,clients --yes


# seed many modules at once
node ops/smoke.mjs smoke:seed:all --each 5 --each-per inventory:20,products:10 --code smoke

# delete across modules
node ops/smoke.mjs smoke:delete:all --yes

# flows
node ops/smoke.mjs smoke:purchaseOrder:flow --lines 3 --qty 2 --code po
node ops/smoke.mjs smoke:salesOrder:flow    --lines 3 --qty 1 --code so
node ops/smoke.mjs smoke:reservation:flow   --code resv --durationMin 60
node ops/smoke.mjs smoke:scanner:basic      --count 3

# report
node ops/smoke.mjs smoke:reports:product-links --limit 500

node ops/smoke.mjs smoke:salesOrder:reserve --stock 5 --qty 3 --code res --strict 1
node ops/smoke.mjs smoke:salesOrder:fulfill --stock 5 --qty 3 --code ful --strict 1
